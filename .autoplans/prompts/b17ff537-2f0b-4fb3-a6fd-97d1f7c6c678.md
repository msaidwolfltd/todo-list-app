# todo list managment application  - Full Stack Prompt

**Generated:** 12/16/2025, 6:33:55 AM
**Tasks Included:** 7

---

# **TodoAI: Full-Stack Todo Management Application with AI Advice**
**Project Overview & Context**

---

## **1. Project Overview**
**TodoAI** is a full-stack todo management application designed to help users organize tasks while leveraging AI to provide personalized productivity advice. The application will combine traditional todo functionality with machine learning-driven insights to optimize task completion, reduce procrastination, and enhance user efficiency.

### **Key Features**
- **Todo Management**: Create, update, delete, and categorize todos with priority levels.
- **AI-Powered Advice**: Analyze user todo patterns and provide actionable suggestions (e.g., "Schedule your high-priority tasks during peak productivity hours").
- **Real-Time Notifications**: Reminders and updates via WebSocket or server-sent events.
- **User Authentication**: Secure JWT-based authentication with email verification.
- **Data Analytics**: Track todo completion rates, time spent, and productivity trends.
- **Customizable Workflows**: Allow users to personalize their todo experience (e.g., due date alerts, category-based filtering).

### **Target Audience**
- **Students**: Manage academic tasks, deadlines, and study schedules.
- **Professionals**: Organize work tasks, meetings, and project milestones.
- **Creative Professionals**: Track creative projects with flexible categorization.
- **AI Enthusiasts**: Users interested in leveraging AI for productivity optimization.

### **Success Criteria**
- **Functionality**: All core features (todo CRUD, AI advice, authentication) must work seamlessly.
- **Performance**: AI advice generation must complete in under 2 seconds.
- **Security**: Compliance with OWASP Top 10 2025 and JWT best practices.
- **User Experience**: Intuitive UI with smooth interactions and real-time feedback.
- **Scalability**: Support for 10,000+ concurrent users with auto-scaling infrastructure.

---

## **2. Technology Stack & Architecture**

### **Frontend**
| Technology          | Version       | Purpose                                                                 |
|---------------------|---------------|-------------------------------------------------------------------------|
| **React**           | 19.0.0        | UI framework for building interactive components.                       |
| **TypeScript**      | 5.4.0         | Static typing for improved code reliability.                            |
| **Next.js**         | 14.2.0        | Full-stack framework for SSR, API routes, and optimized performance.    |
| **Tailwind CSS**    | 3.4.0         | Utility-first CSS framework for responsive design.                     |
| **Zustand**         | 4.5.0         | Lightweight state management for React.                                  |
| **React Query**     | 5.20.0        | Data fetching and caching for API calls.                                 |
| **Socket.IO**       | 4.7.2         | Real-time notifications and updates.                                   |
| **Framer Motion**   | 11.0.0        | Animations and transitions for enhanced UX.                              |
| **ESLint**          | 8.56.0        | Code linting for consistency and best practices.                        |
| **Prettier**        | 3.1.0         | Code formatting for clean, readable output.                            |

### **Backend**
| Technology          | Version       | Purpose                                                                 |
|---------------------|---------------|-------------------------------------------------------------------------|
| **Node.js**         | 20.x          | Runtime environment for server-side JavaScript.                         |
| **Express.js**      | 4.18.2        | Web framework for building RESTful APIs.                                |
| **NestJS**          | 10.3.0        | Modular backend architecture for scalability.                          |
| **TypeORM**         | 0.3.18        | ORM for PostgreSQL with active record and data mapper patterns.         |
| **Prisma**          | 5.8.0         | Modern ORM for database interactions with type safety.                  |
| **JWT**             | 4.0.0         | Secure authentication with JSON Web Tokens.                            |
| **Bcrypt**          | 5.1.1         | Password hashing for secure storage.                                    |
| **Helmet**          | 7.1.0         | HTTP headers for security (CSP, HSTS).                                  |
| **CORS**            | 2.8.5         | Cross-origin resource sharing configuration.                            |
| **Rate Limiter**    | 6.7.0         | Protect API from brute force attacks.                                   |
| **Morgan**          | 1.10.0        | HTTP request logging.                                                   |
| **Winston**         | 3.11.0        | Structured logging for debugging and monitoring.                        |
| **OpenAI API**      | 1.0.0         | AI integration for generating personalized advice.                       |

### **Database**
| Technology          | Version       | Purpose                                                                 |
|---------------------|---------------|-------------------------------------------------------------------------|
| **PostgreSQL**      | 16.0          | Relational database for structured data storage.                       |
| **Redis**           | 7.2.0         | Caching layer for AI responses and session management.                  |
| **Docker**          | 25.0.3        | Containerization for database and backend services.                    |
| **Fly.io**          | Latest        | Hosting for PostgreSQL with global redundancy.                          |

### **AI & Machine Learning**
| Technology          | Version       | Purpose                                                                 |
|---------------------|---------------|-------------------------------------------------------------------------|
| **OpenAI API**      | GPT-4.5       | Natural language processing for advice generation.                      |
| **LangChain**       | 0.1.0         | Framework for AI workflows and prompt engineering.                     |
| **Vector DB**       | Pinecone      | Store and retrieve user todo patterns for AI analysis.                  |
| **Python**          | 3.11.6        | Scripting for AI model interactions and data processing.               |

### **Deployment & DevOps**
| Technology          | Version       | Purpose                                                                 |
|---------------------|---------------|-------------------------------------------------------------------------|
| **Docker**          | 25.0.3        | Containerization for frontend, backend, and database.                   |
| **Kubernetes**      | 1.28.0        | Orchestration for scaling and managing containers.                     |
| **ArgoCD**          | 2.7.0         | GitOps for continuous deployment.                                       |
| **GitHub Actions**  | Latest        | CI/CD pipeline for automated testing and deployment.                   |
| **Terraform**       | 1.6.0         | Infrastructure as Code (IaC) for cloud resources.                     |
| **AWS/GCP**         | Latest        | Cloud hosting for backend, database, and AI services.                   |
| **Sentry**          | 8.0.0         | Error monitoring and tracking.                                         |
| **Prometheus**      | 2.47.0        | Metrics and monitoring for performance optimization.                     |
| **Grafana**         | 10.2.0        | Visualization of application metrics.                                   |

---

## **3. Detailed Implementation Requirements**

---

### **3.1 Project Planning & Architecture**

#### **3.1.1 Core Requirements & User Stories**
| User Story ID | Description                                                                                     | Priority |
|---------------|-------------------------------------------------------------------------------------------------|----------|
| US-001        | As a user, I want to sign up/login so I can access my todos.                                   | High     |
| US-002        | As a user, I want to create, read, update, and delete todos so I can manage my tasks.          | High     |
| US-003        | As a user, I want to set priorities (low, medium, high, urgent) for my todos.                  | High     |
| US-004        | As a user, I want to categorize todos (work, personal, study) for better organization.         | Medium   |
| US-005        | As a user, I want to receive AI-generated advice on optimizing my todo list.                   | Critical |
| US-006        | As a user, I want to set due dates and reminders for my todos.                                   | Medium   |
| US-007        | As a user, I want to receive real-time notifications for due todos.                            | Medium   |
| US-008        | As a user, I want to rate AI suggestions to improve future recommendations.                     | Low      |

#### **3.1.2 System Architecture Diagram**
```mermaid
graph TD
    A[Frontend: Next.js + React] -->|API Calls| B[Backend: NestJS/Express]
    A -->|WebSocket| B
    B -->|PostgreSQL| C[Database: Todos, Users, AI History]
    B -->|Redis| D[Cache: AI Responses, Sessions]
    B -->|OpenAI API| E[AI: Advice Generation]
    B -->|Terraform| F[Cloud: AWS/GCP]
    F -->|Kubernetes| G[Orchestration: Docker Containers]
    G -->|ArgoCD| H[GitOps: CI/CD Pipeline]
```

#### **3.1.3 Data Models & Database Schema**
```sql
-- Users Table
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    is_verified BOOLEAN DEFAULT FALSE,
    last_login TIMESTAMP WITH TIME ZONE
);

-- Todos Table
CREATE TABLE todos (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    priority VARCHAR(20) CHECK (priority IN ('low', 'medium', 'high', 'urgent')),
    category VARCHAR(50),
    due_date TIMESTAMP WITH TIME ZONE,
    is_completed BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- AI Advice Table
CREATE TABLE ai_advice (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    todo_id INTEGER REFERENCES todos(id) ON DELETE CASCADE,
    advice TEXT NOT NULL,
    confidence_score FLOAT,
    generated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    is_rated BOOLEAN DEFAULT FALSE,
    rating INTEGER CHECK (rating BETWEEN 1 AND 5)
);

-- User Preferences Table
CREATE TABLE user_preferences (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    theme VARCHAR(20) DEFAULT 'light',
    notification_preferences JSONB,
    ai_advice_frequency VARCHAR(20) DEFAULT 'weekly',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

### **3.2 User Authentication System**

#### **3.2.1 JWT Implementation**
- **Token Structure**:
  ```json
  {
    "sub": "user_id",
    "email": "user@example.com",
    "iat": 1700000000,
    "exp": 1700003600,
    "roles": ["user"]
  }
  ```
- **Security Best Practices**:
  - Use `HS256` algorithm for signing tokens.
  - Store JWT in `HttpOnly` cookies to prevent XSS attacks.
  - Set short expiration (15-30 minutes) for access tokens.
  - Use refresh tokens for long-lived sessions (stored securely in Redis).

#### **3.2.2 User Registration Flow**
1. **Frontend**:
   - Collect `email`, `password`, `first_name`, `last_name`.
   - Validate inputs (e.g., password strength, email format).
   - Send verification email via Nodemailer.

2. **Backend**:
   - Hash password with `bcrypt` (cost factor: 12).
   - Store user in PostgreSQL.
   - Generate JWT and send to frontend.

**Example Code (NestJS)**:
```typescript
// auth.service.ts
import { Injectable } from '@nestjs/common';
import { JwtService } from '@nestjs/jwt';
import * as bcrypt from 'bcrypt';

@Injectable()
export class AuthService {
  constructor(private jwtService: JwtService) {}

  async validateUser(email: string, password: string): Promise<any> {
    const user = await this.userRepository.findOne({ where: { email } });
    if (user && (await bcrypt.compare(password, user.password_hash))) {
      const { password_hash, ...result } = user;
      return result;
    }
    return null;
  }

  async login(user: any) {
    const payload = { email: user.email, sub: user.id, roles: user.roles };
    return {
      access_token: this.jwtService.sign(payload, { expiresIn: '15m' }),
      refresh_token: this.jwtService.sign(payload, { expiresIn: '7d' }),
    };
  }
}
```

#### **3.2.3 Login/Logout Flow**
- **Login**:
  - Frontend sends `POST /auth/login` with `email` and `password`.
  - Backend validates credentials and returns JWT.
  - Store tokens in `HttpOnly` cookies.

- **Logout**:
  - Frontend sends `POST /auth/logout`.
  - Backend invalidates tokens by setting `exp` to past date in Redis.

---

### **3.3 Core Todo Management**

#### **3.3.1 Todo CRUD API**
| Endpoint          | Method | Description                          | Auth Required | Request Body Example                     | Response Example                     |
|-------------------|--------|--------------------------------------|----------------|------------------------------------------|--------------------------------------|
| `/todos`          | POST   | Create a new todo                   | Yes            | `{ "title": "Learn AI", "priority": "high" }` | `{ "id": 1, "title": "Learn AI" }`   |
| `/todos/:id`      | GET    | Get a todo by ID                     | Yes            | -                                        | `{ "id": 1, "title": "Learn AI" }`   |
| `/todos`          | GET    | List all todos                       | Yes            | `{ "priority": "high", "limit": 10 }`   | `[{ "id": 1, "title": "Learn AI" }]` |
| `/todos/:id`      | PUT    | Update a todo                        | Yes            | `{ "title": "Master AI" }`              | `{ "id": 1, "title": "Master AI" }`  |
| `/todos/:id`      | DELETE | Delete a todo                        | Yes            | -                                        | `{ "success": true }`                |

**Example Code (Express.js)**:
```typescript
// todos.controller.ts
import { Controller, Post, Body, Get, Param, Put, Delete } from '@nestjs/common';

@Controller('todos')
export class TodosController {
  constructor(private readonly todosService: TodosService) {}

  @Post()
  create(@Body() createTodoDto: CreateTodoDto) {
    return this.todosService.create(createTodoDto);
  }

  @Get(':id')
  findOne(@Param('id') id: string) {
    return this.todosService.findOne(+id);
  }

  @Get()
  findAll(@Query() query: FilterTodosDto) {
    return this.todosService.findAll(query);
  }

  @Put(':id')
  update(@Param('id') id: string, @Body() updateTodoDto: UpdateTodoDto) {
    return this.todosService.update(+id, updateTodoDto);
  }

  @Delete(':id')
  remove(@Param('id') id: string) {
    return this.todosService.remove(+id);
  }
}
```

#### **3.3.2 Priority & Category System**
- **Priority Levels**: `low`, `medium`, `high`, `urgent` (stored as `VARCHAR`).
- **Categories**: Customizable (e.g., `work`, `personal`, `study`).
- **Validation**:
  - Ensure `priority` is one of the allowed values.
  - Allow empty `category` or enforce a default.

#### **3.3.3 Due Date & Reminders**
- **Due Date**: Stored as `TIMESTAMP WITH TIME ZONE` in PostgreSQL.
- **Reminders**:
  - Triggered via WebSocket when due date is approaching.
  - Use `pg-notify` for PostgreSQL event notifications.

**Example Code (PostgreSQL Trigger)**:
```sql
CREATE OR REPLACE FUNCTION notify_due_todos()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM pg_notify('due_todos', json_build_object('todo_id', NEW.id, 'due_date', NEW.due_date)::text);
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER due_todo_trigger
AFTER INSERT ON todos
FOR EACH ROW EXECUTE FUNCTION notify_due_todos();
```

---

### **3.4 AI Advice Engine**

#### **3.4.1 AI Provider Integration**
- **OpenAI API**:
  - Use `gpt-4.5` for advice generation.
  - Cache responses in Redis to reduce API calls.
  - Implement rate limiting (e.g., 10 requests/minute).

**Example Code (Python + LangChain)**:
```python
# ai_service.py
from langchain.llms import OpenAI
from langchain.prompts import PromptTemplate
from langchain.chains import LLMChain

class AIAdviceService:
    def __init__(self):
        self.llm = OpenAI(temperature=0.7, model_name="gpt-4.5")
        self.prompt_template = PromptTemplate(
            input_variables=["todos", "user_history"],
            template="""
            Analyze the user's todos and provide actionable advice to optimize their productivity.
            Todos: {todos}
            User History: {user_history}
            Advice:
            """
        )
        self.chain = LLMChain(llm=self.llm, prompt=self.prompt_template)

    async def generate_advice(self, todos, user_history):
        return await self.chain.run({"todos": todos, "user_history": user_history})
```

#### **3.4.2 Advice Trigger Logic**
- **Triggers**:
  - After 5 todos are created in a session.
  - Weekly review (e.g., every Sunday at 9 AM).
  - When a user marks a todo as completed.
- **Example**:
  ```typescript
  // Trigger advice after todo creation
  @Post('todos')
  async createTodo(@Body() createTodoDto: CreateTodoDto, @User() user: User) {
    const todo = await this.todosService.create(createTodoDto, user.id);
    const todos = await this.todosService.getUserTodos(user.id);
    if (todos.length % 5 === 0) {
      await this.aiService.generateAdvice(todos, user.id);
    }
    return todo;
  }
  ```

#### **3.4.3 Pattern Recognition & Personalized Suggestions**
- **Patterns to Detect**:
  - Procrastination trends (e.g., todos marked as "urgent" but not completed).
  - Priority mismatches (e.g., high-priority todos with no due date).
  - Time-based productivity (e.g., best times to complete tasks).
- **Example Advice**:
  - "You tend to procrastinate on 'high' priority tasks. Try scheduling them for your peak productivity hours (9 AM - 12 PM)."
  - "You have 3 urgent tasks due this week. Consider breaking them into smaller subtasks to reduce overwhelm."

#### **3.4.4 User Feedback Loop**
- **Rating System**:
  - Users rate AI suggestions (1-5 stars).
  - Store ratings in `ai_advice` table.
- **Example Code**:
  ```typescript
  // ai.controller.ts
  @Post('advice/:id/rate')
  async rateAdvice(
    @Param('id') id: string,
    @Body() rateAdviceDto: RateAdviceDto,
    @User() user: User
  ) {
    return this.aiService.rateAdvice(+id, rateAdviceDto.rating, user.id);
  }
  ```

---

### **3.5 Testing Strategy**

#### **3.5.1 Unit Tests**
- **Libraries**: Jest, Supertest.
- **Examples**:
  - Test JWT validation.
  - Test todo CRUD operations.
  - Test AI advice generation.

**Example (Jest)**:
```typescript
// auth.service.spec.ts
describe('AuthService', () => {
  let service: AuthService;
  let jwtService: jest.Mocked<JwtService>;

  beforeEach(() => {
    jwtService = new JwtService({ secret: 'test' }) as any;
    service = new AuthService(jwtService);
  });

  it('should return a JWT token', async () => {
    const user = { id: 1, email: 'test@example.com', roles: ['user'] };
    const result = await service.login(user);
    expect(result.access_token).toBeDefined();
  });
});
```

#### **3.5.2 Integration Tests**
- **Libraries**: Supertest, Prisma Test Client.
- **Examples**:
  - Test todo creation and retrieval.
  - Test AI advice flow with mock data.

**Example (Supertest)**:
```typescript
// todos.e2e-spec.ts
describe('TodosController', () => {
  it('should create a todo', () => {
    return request(app.getHttpServer())
      .post('/todos')
      .set('Authorization', `Bearer ${token}`)
      .send({ title: 'Test Todo', priority: 'high' })
      .expect(201)
      .expect((res) => {
        expect(res.body.title).toBe('Test Todo');
      });
  });
});
```

#### **3.5.3 Security Tests**
- **OWASP Top 10 2025**:
  - **Broken Access Control**: Ensure all endpoints require authentication.
  - **Injection**: Use Prisma/TypeORM to prevent SQL injection.
  - **Cryptographic Failures**: Always hash passwords with `bcrypt`.
- **Tools**: OWASP ZAP, Burp Suite.

#### **3.5.4 Performance Tests**
- **Tools**: k6, LoadRunner.
- **Goals**:
  - AI advice generation < 2 seconds.
  - API response time < 500ms under load.

---

### **3.6 Documentation & User Guide**

#### **3.6.1 API Documentation**
- **Tool**: Swagger/OpenAPI.
- **Example**:
  ```yaml
  openapi: 3.0.0
  paths:
    /todos:
      post:
        summary: Create a new todo
        requestBody:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Todo'
        responses:
          201:
            description: Todo created
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Todo'
  components:
    schemas:
      Todo:
        type: object
        properties:
          title:
            type: string
          priority:
            type: string
            enum: [low, medium, high, urgent]
  ```

#### **3.6.2 AI Features Guide**
- **Explain**:
  - How AI advice is generated.
  - How to customize advice frequency.
  - How to provide feedback on suggestions.

#### **3.6.3 User Onboarding**
- **Tutorial**:
  - Step-by-step guide for first-time users.
  - Example: "How to create your first todo and get AI advice."

---

### **3.7 Deployment & DevOps**

#### **3.7.1 CI/CD Pipeline**
- **Tools**: GitHub Actions, ArgoCD.
- **Workflow**:
  1. **Code Commit**: Trigger GitHub Actions.
  2. **Linting**: Run ESLint/Prettier.
  3. **Unit Tests**: Jest/Supertest.
  4. **Build**: Dockerize frontend/backend.
  5. **Deploy**: Push to Kubernetes via ArgoCD.

**Example (GitHub Actions)**:
```yaml
name: CI/CD Pipeline
on: [push]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: npm install
      - run: npm run test
  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: docker-compose build
      - run: kubectl apply -f k8s/
```

#### **3.7.2 Docker Configuration**
- **Frontend**:
  ```dockerfile
  FROM node:20-alpine AS builder
  WORKDIR /app
  COPY package.json .
  RUN npm install
  COPY . .
  RUN npm run build

  FROM node:20-alpine
  WORKDIR /app
  COPY --from=builder /app/.next ./.next
  COPY --from=builder /app/public ./public
  COPY --from=builder /app/package.json ./package.json
  COPY --from=builder /app/node_modules ./node_modules
  EXPOSE 3000
  CMD ["npm", "start"]
  ```

- **Backend**:
  ```dockerfile
  FROM node:20-alpine
  WORKDIR /app
  COPY package.json .
  RUN npm install
  COPY . .
  EXPOSE 5000
  CMD ["npm", "run", "start:prod"]
  ```

#### **3.7.3 Kubernetes Deployment**
- **Example (Deployment YAML)**:
  ```yaml
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: todoai-backend
  spec:
    replicas: 3
    selector:
      matchLabels:
        app: todoai-backend
    template:
      metadata:
        labels:
          app: todoai-backend
      spec:
        containers:
          - name: backend
            image: todoai/backend:latest
            ports:
              - containerPort: 5000
            envFrom:
              - secretRef:
                  name: todoai-secrets
  ```

---

## **4. UI/UX Design Specifications**

### **4.1 Design System**
| Component          | Description                                                                 |
|--------------------|-----------------------------------------------------------------------------|
| **Primary Color**  | Deep Focus Blue (`#2A5B84`)                                                |
| **Secondary Color**| Calm Teal (`#4ECDC4`)                                                      |
| **Typography**     | - Headings: `Inter Bold`                                                    |
|                    | - Body: `Inter Regular`                                                    |
| **Spacing**        | - `8px` (small), `16px` (medium), `32px` (large)                           |
| **Shadows**        | - `box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1)`                               |

### **4.2 Component Hierarchy**
```
src/
├── components/
│   ├── common/
│   │   ├── Button.tsx
│   │   ├── Input.tsx
│   │   └── Card.tsx
│   ├── layout/
│   │   ├── Header.tsx
│   │   ├── Footer.tsx
│   │   └── Sidebar.tsx
│   ├── todos/
│   │   ├── TodoList.tsx
│   │   ├── TodoItem.tsx
│   │   └── TodoForm.tsx
│   └── ai/
│       ├── AdviceCard.tsx
│       └── FeedbackForm.tsx
```

### **4.3 Responsive Design**
- **Breakpoints**:
  - `375px`: Mobile (small)
  - `768px`: Tablet
  - `1024px`: Desktop
- **Example (Tailwind CSS)**:
  ```html
  <div className="w-full md:w-1/2 lg:w-1/3 p-4">
    <TodoList />
  </div>
  ```

### **4.4 Accessibility (WCAG 2.1)**
- **Requirements**:
  - Alt text for images.
  - Keyboard navigable.
  - ARIA labels for interactive elements.
  - Color contrast ratio ≥ 4.5:1.

**Example**:
```html
<button aria-label="Add new todo" className="bg-blue-500 text-white p-2">
  <PlusIcon />
</button>
```

---

## **5. Security Requirements**

### **5.1 Authentication & Authorization**
- **JWT Best Practices 2025**:
  - Short-lived access tokens (15-30 minutes).
  - Refresh tokens stored in `HttpOnly` cookies.
  - Token revocation via Redis blacklist.

### **5.2 Input Validation & Sanitization**
- **Frontend**: Use Zod for schema validation.
- **Backend**: Use Prisma/TypeORM to prevent SQL injection.

**Example (Zod)**:
```typescript
import { z } from 'zod';

const TodoSchema = z.object({
  title: z.string().min(1).max(255),
  priority: z.enum(['low', 'medium', 'high', 'urgent']),
  category: z.string().optional(),
});

export type CreateTodoDto = z.infer<typeof TodoSchema>;
```

### **5.3 OWASP Top 10 2025 Mitigations**
| Risk                | Mitigation                                                                 |
|---------------------|---------------------------------------------------------------------------|
| Broken Access Control | Role-based access control (RBAC) with NestJS Guards.                     |
| Injection           | Use Prisma/TypeORM parameterized queries.                                 |
| Cryptographic Failures | Always hash passwords with `bcrypt`.                                      |
| Security Misconfig  | Use `helmet` for HTTP headers (CSP, HSTS).                               |

---

## **6. Performance Optimization**

### **6.1 Frontend**
- **Code Splitting**: Dynamic imports for lazy loading.
- **Image Optimization**: Use `next/image` with `quality=80`.
- **Critical CSS**: Inline above-the-fold CSS.

### **6.2 Backend**
- **Caching**: Redis for AI responses and frequent queries.
- **Database Indexes**:
  ```sql
  CREATE INDEX idx_todos_user_id ON todos(user_id);
  CREATE INDEX idx_todos_priority ON todos(priority);
  CREATE INDEX idx_todos_due_date ON todos(due_date);
  ```

### **6.3 AI Optimization**
- **Rate Limiting**: 10 requests/minute per user.
- **Caching**: Store AI responses in Redis for 24 hours.

---

## **7. Deployment Instructions**

### **7.1 Environment Setup**
- **Variables**:
  ```env
  # Frontend
  NEXT_PUBLIC_API_URL=http://localhost:5000
  NEXT_PUBLIC_AI_ENABLED=true

  # Backend
  JWT_SECRET=your_jwt_secret
  JWT_EXPIRES_IN=15m
  DATABASE_URL=postgresql://user:pass@localhost:5432/todoai
  REDIS_URL=redis://localhost:6379
  OPENAI_API_KEY=your_openai_key
  ```

### **7.2 Docker Compose**
```yaml
version: '3.8'
services:
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    depends_on:
      - backend
  backend:
    build: ./backend
    ports:
      - "5000:5000"
    depends_on:
      - postgres
      - redis
  postgres:
    image: postgres:16
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
      POSTGRES_DB: todoai
    volumes:
      - postgres_data:/var/lib/postgresql/data
  redis:
    image: redis:7
    ports:
      - "6379:6379"
volumes:
  postgres_data:
```

### **7.3 Kubernetes Helm Chart**
- **Example**:
  ```bash
  helm install todoai ./charts/todoai
  ```

---

## **8. Code Quality Standards**

### **8.1 Code Style**
- **ESLint Config**:
  ```json
  {
    "extends": ["eslint:recommended", "plugin:@typescript-eslint/recommended", "prettier"],
    "rules": {
      "indent": ["error", 2],
      "quotes": ["error", "single"],
      "semi": ["error", "always"]
    }
  }
  ```

### **8.2 Git Commit Messages**
- **Format**: `[type]: description`
  - `feat`: New feature.
  - `fix`: Bug fix.
  - `docs`: Documentation changes.
  - `refactor`: Code refactoring.

**Example**:
```
feat: add AI advice generation
fix: resolve JWT token expiration issue
```

---

## **9. Edge Cases & Error Handling**

### **9.1 Todo Management**
- **Edge Cases**:
  - Empty todo title.
  - Invalid priority value.
  - Due date in the past.

**Example (Validation)**:
```typescript
if (!title.trim()) {
  throw new BadRequestException('Title cannot be empty');
}
if (!['low', 'medium', 'high', 'urgent'].includes(priority)) {
  throw new BadRequestException('Invalid priority');
}
```

### **9.2 AI Advice**
- **Edge Cases**:
  - No todos to analyze.
  - API rate limit exceeded.
  - Invalid user input.

**Example (Error Handling)**:
```typescript
try {
  const advice = await this.aiService.generateAdvice(todos, user.id);
} catch (error) {
  if (error.message.includes('rate limit')) {
    throw new TooManyRequestsException('AI rate limit exceeded');
  }
  throw new InternalServerErrorException('Failed to generate advice');
}
```

---

## **10. Future Enhancements**
- **Multi-Platform Support**: iOS/Android apps.
- **Collaborative Todos**: Share todos with teammates.
- **Voice Input**: Add voice-to-text for todo creation.
- **Advanced Analytics**: Visualize todo completion trends.

---

## **11. Acceptance Criteria**
| Task                          | Acceptance Criteria                                                                 |
|-------------------------------|-----------------------------------------------------------------------------------|
| **User Authentication**       | Users can sign up/login with JWT tokens.                                           |
| **Todo CRUD**                 | Todos can be created, read, updated, and deleted with validation.                  |
| **AI Advice**                 | AI generates advice in < 2 seconds with 90% accuracy.                              |
| **Real-Time Notifications**   | Users receive WebSocket alerts for due todos.                                      |
| **Security**                  | Pass OWASP ZAP security scan with no critical vulnerabilities.                    |
| **Performance**               | API response time < 500ms under 1000 RPS.                                         |
| **Deployment**                | Zero-downtime deployments via GitOps.                                             |

---

## **12. Final Notes**
This prompt provides a **comprehensive, step-by-step guide** for building **TodoAI**, a full-stack todo management application with AI-driven advice. Every section includes:
- **Technical specifications** (tech stack, architecture).
- **Implementation details** (code examples, API specs).
- **Security and performance** best practices.
- **Testing and deployment** strategies.

**Next Steps**:
1. Set up the project repository.
2. Initialize frontend and backend with the specified tech stack.
3. Implement authentication and todo CRUD.
4. Integrate AI advice engine.
5. Deploy using Docker and Kubernetes.

---

*Generated by autoplans.dev Prompt Generator*
